{% extends 'buswait/base.html' %}

{% block title %}{{ busStopName }}-{% endblock %}

{% block header %}{{ busStopName }}{% endblock %}

{% block table %}
    {% if busStop_set %}
    <div class="datagrid">
        <table align="center" id="bus_table">
            <tr>
                <th width="10%">    Bus <br> Number     </th>
                <th>                Location            </th>
                <th width="10%">    Time                </th>
                <th width="10%">    Report              </th>
            </tr>
            {% for busStop in busStop_set %}
                {% for location in busStop.get_previous %}
                
                <tr id={{busStop.route}}>
                    
                    {% if forloop.counter == 1 %}
                        <td rowspan={{busStop.get_previous|length}} 
                            class="hyperlink"
                            onclick="location.href='{% url 'buswait:busDetail' %}?busNumber={{busStop.route}}'">
                        {{busStop.route}} </td>
                    {% endif %}
                    
                        <td id={{location.name}}> {{location.name}} </td>
                        
                        <td id={{location.name}}_time>
                    {% if location.is_today %}
                        {{location.time|date:"H:i"}} 
                    {% else %} 
                        - 
                    {% endif %}
                        </td>
                        
                    {% if forloop.counter == 1 %}
                        <td rowspan={{busStop.get_previous|length}}> 
                        <a href={% url 'buswait:report_bus' busStop.id %} > report </a></td>
                    {% endif %}
            
                </tr>
                {% endfor %}
            {% endfor %}
            </table>
        </div>
        <a href={% url 'buswait:index' %}>back</a>
    {% endif %}
{% endblock %}